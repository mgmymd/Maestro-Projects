# TC1 - criar um primeiro contato com sucesso

appId: com.google.android.contacts
---
# Executar o arquivo JS
- runScript: "contatos/valores.js"

# Abrindo o app, launchApp não está funcionando
- tapOn: "Contacts"

# Sem contatos registrados
- runFlow:
    when:
      visible: "No contacts yet"
    commands:
      - assertVisible: "No contacts yet"
      - tapOn: "Create contact"
      - assertVisible: "Create contact"

# Com contatos registrados
- runFlow:
    when:
      notVisible: "No contacts yet"
    commands:
      - tapOn: "Create contact"
      - assertVisible: "Create contact"

# Inserindo nome e validando entrada
- tapOn: "First name"
- inputText: ${output.contatos.contato1.nome}
- assertVisible: ${output.contatos.contato1.nome}

# Inserindo número de telefone, classificação e validando entrada
- scrollUntilVisible:
    element: "Phone"
    direction: "DOWN"
- assertVisible: "Phone"
- tapOn: "Phone"
- inputText: ${output.contatos.contato1.telefone}
- assertVisible: ${output.contatos.contato1.telefone_visível}
- scrollUntilVisible:
    element: "Label"
    direction: "DOWN"
- tapOn: "Label"
- tapOn:
    text: "Home"
    index: 0
- assertVisible: "Home"

# Inserindo e-mail e validando
- tapOn: "Email"
- inputText: ${output.contatos.contato1.email}
- assertVisible:
    text: ${output.contatos.contato1.email}
    index: 0

# Inserindo endereço
- scrollUntilVisible:
    element:
      id: "com.google.android.contacts:id/more_fields"
    direction: "DOWN"
- tapOn:
    id: "com.google.android.contacts:id/more_fields"
- scrollUntilVisible:
    element: "Address"
    direction: "DOWN"
- tapOn: "Address"
- inputText: ${output.contatos.contato1.endereco}
- tapOn:
    id: "com.google.android.contacts:id/place_autocomplete_prediction_primary_text"
    index: 4
- assertVisible: "Jiufen St, Xiaying District, Tainan City, Taiwan 735"
- tapOn: "Save"

# Validando tela do contato criado
- waitForAnimationToEnd:
    timeout: 9000
- assertVisible: ${output.contatos.contato1.nome}
- assertVisible:
    id: "com.google.android.contacts:id/large_title"
- assertVisible: ${output.contatos.contato1.telefone_visível}
- assertVisible: "Jiufen St, Xiaying District, Tainan City, Taiwan 735"
- assertVisible:
    id: "com.google.android.contacts:id/header"
    index: 1
